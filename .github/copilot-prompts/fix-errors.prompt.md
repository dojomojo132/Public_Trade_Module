# Исправление ошибок BSL и XML

## Когда использовать
- После `get_errors` показывает ошибки
- После неудачной загрузки конфигурации
- При диагностиках BSL Language Server

## Алгоритм

### Шаг 1: Сбор ошибок
1. Вызвать `get_errors` на проблемный файл
2. Если файл неизвестен — запустить `validate-config.ps1` для общей картины

### Шаг 2: Классификация и исправление BSL ошибок

#### Несуществующие функции
| Ошибочный вызов | Правильный |
|----------------|-----------|
| `ЗначениеВСтроку()` | `ЗначениеВСтрокуВнутр()` |
| `СтрокаВЗначение()` | `ЗначениеИзСтрокиВнутр()` |
| `ТекущаяДата()` | `ТекущаяДатаСеанса()` |
| `Найти()` | `СтрНайти()` |

#### Неправильный род
| Ошибка | Правильно |
|--------|-----------|
| `Новая Структура` | `Новый Структура` |
| `Новая Массив` | `Новый Массив` |
| `Новая Запрос` | `Новый Запрос` |
| `Новая Соответствие` | `Новое Соответствие` |

#### Модальные вызовы (запрещены в 8.3.27!)
| Запрещено | Замена |
|-----------|--------|
| `Вопрос()` | `ВопросАсинх()` |
| `Предупреждение()` | `ПредупреждениеАсинх()` |
| `ОткрытьФормуМодально()` | `ОткрытьФормуАсинх()` |
| `ВвестиЧисло()` | `ВвестиЧислоАсинх()` |
| `ВвестиСтроку()` | `ВвестиСтрокуАсинх()` |

#### Отсутствует директива компиляции
Каждый метод ОБЯЗАН иметь директиву:
```bsl
&НаКлиенте        // код выполняется на клиенте
&НаСервере         // код на сервере с контекстом формы
&НаСервереБезКонтекста  // код на сервере без контекста формы
```

### Шаг 3: Классификация и исправление XML ошибок

#### Неполный заголовок
- Скопировать ПОЛНЫЙ заголовок из `Документация/Шаблоны/*.xml` (все xmlns)

#### Отсутствует InternalInfo
- Добавить блок `<InternalInfo>` с `<xr:GeneratedType>` для справочников, документов, регистров

#### Невалидный UUID  
- Формат: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx` (только lowercase hex)

#### Ошибки формы
- Каждый элемент ввода ОБЯЗАН иметь дочерние ContextMenu и ExtendedTooltip
- Каждая таблица ОБЯЗАНА иметь ContextMenu, AutoCommandBar, ExtendedTooltip, SearchStringAddition, ViewStatusAddition, SearchControlAddition
- Все id элементов уникальны внутри формы

### Шаг 4: Повторная проверка
1. `get_errors` на исправленный файл
2. Если ещё есть ошибки → повторить Шаг 2-3
3. Финально: `validate-config.ps1` → 0 ошибок
