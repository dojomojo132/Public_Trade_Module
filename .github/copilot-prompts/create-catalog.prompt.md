# Создание нового справочника 1С

## Входные данные
- Имя справочника: {{ИМЯ}}
- Реквизиты: {{РЕКВИЗИТЫ}}
- Табличные части: {{ТЧ}} (опционально)
- Подсистема: {{ПОДСИСТЕМА}}

## Алгоритм (выполнить ВСЕ шаги)

### Шаг 1: Проверка
1. Прочитать спецификацию `Документация/Спецификации/ТЕХНИЧЕСКАЯ СПЕЦИФИКАЦИЯ КОНФИГУРАЦИИ PTM (Public Trade Module).xml`
2. Убедиться что справочник описан в спецификации
3. Проверить что справочника ещё нет в `Конфигурация/Проверка/Configuration.xml`

### Шаг 2: Создание XML объекта
1. Взять шаблон `Документация/Шаблоны/template-catalog.xml`
2. Скопировать ВЕСЬ заголовок с xmlns (НЕ менять!)
3. Заменить плейсхолдеры `{{...}}` реальными значениями
4. Сгенерировать UUID для каждого элемента: объект, каждый реквизит, каждая ТЧ, каждая колонка ТЧ
5. Сохранить как `Конфигурация/Проверка/Catalogs/{{ИМЯ}}.xml`

### Шаг 3: Configuration.xml
1. Открыть `Конфигурация/Проверка/Configuration.xml`
2. Найти секцию `<ChildObjects>`
3. Добавить `<Catalog>{{ИМЯ}}</Catalog>` в алфавитном порядке среди других Catalog

### Шаг 4: ConfigDumpInfo.xml
1. Открыть `Конфигурация/Проверка/ConfigDumpInfo.xml`
2. Добавить блок:
```xml
<Metadata name="Catalog.{{ИМЯ}}" id="{{UUID_ОБЪЕКТА}}" configVersion="{{RANDOM_HEX_32}}00000000">
    <Metadata name="Catalog.{{ИМЯ}}.Attribute.{{РЕКВИЗИТ}}" id="{{UUID_РЕКВИЗИТА}}"/>
    <!-- повторить для каждого реквизита, ТЧ, колонки ТЧ -->
</Metadata>
```

### Шаг 5: Подсистема
1. Открыть `Конфигурация/Проверка/Subsystems/{{ПОДСИСТЕМА}}.xml`
2. Добавить `<xr:Item>Catalog.{{ИМЯ}}</xr:Item>` в `<Content>`

### Шаг 6: Форма (если нужна)
1. Использовать prompt `create-form.prompt.md` для создания формы справочника

### Шаг 7: Валидация
1. Вызвать `get_errors` на созданный XML файл
2. Запустить `powershell -ExecutionPolicy Bypass -File "Документация\Валидация\validate-config.ps1"`
3. Исправить ВСЕ ошибки до достижения 0

### Шаг 8: Спецификация
1. Обновить затронутый блок в спецификации
2. Добавить `<Record date="YYYY-MM-DD">Создан справочник {{ИМЯ}}</Record>` в History
