# Реестр критических ошибок

> **Назначение:** Хранилище критических ошибок, которые приводили к нарушению целостности конфигурации/ИБ.  
> **Цель:** Не допускать повторения этих ошибок при разработке.  
> **Правило:** При КАЖДОМ нарушении целостности — агент ОБЯЗАН записать ошибку сюда ПЕРЕД продолжением работы.

---

## Формат записи

```text
### [YYYY-MM-DD] Краткое описание ошибки

- **Категория:** XML | BSL | Деплой | Структура | Данные
- **Симптом:** Что произошло (ошибка в логе, потеря данных, etc.)
- **Причина:** Корневая причина проблемы
- **Решение:** Как была исправлена ошибка
- **Правило-предохранитель:** Что теперь ОБЯЗАТЕЛЬНО делать/НЕ делать, чтобы ошибка не повторилась
- **Затронутые файлы:** Список файлов, которые были повреждены/исправлены
```

---

## Ошибки

<!-- Новые ошибки добавлять СВЕРХУ списка (самые свежие — первыми) -->

### [2026-02-13] Команда формы без Action — кнопка не видна на клиенте

- **Категория:** XML
- **Симптом:** Кнопка, привязанная к команде формы, отображается в Конфигураторе, но НЕ видна в клиенте 1С
- **Причина:** В определении `<Command>` в Form.xml отсутствует элемент `<Action>ИмяПроцедуры</Action>`. Без него платформа не связывает команду с BSL-обработчиком и не показывает кнопку на клиенте
- **Решение:** Добавить `<Action>ИмяПроцедуры</Action>` в каждый `<Command>` в Form.xml. Имя должно совпадать с именем процедуры `&НаКлиенте` в Module.bsl
- **Правило-предохранитель:** При создании Command в Form.xml — ОБЯЗАТЕЛЬНО добавлять `<Action>`. Минимальная структура команды: `<Command name="..." id="N"><Title>...</Title><ToolTip>...</ToolTip><Action>ИмяПроцедуры</Action></Command>`. НЕ добавлять Use, Representation, ModifiesStoredData, CurrentRowUse — они необязательны и могут вызвать проблемы
- **Затронутые файлы:** `Documents/РасходныйКассовыйОрдер/Forms/ФормаДокумента/Ext/Form.xml`

### [2026-02-13] Инициализация реестра

- **Категория:** Документация
- **Симптом:** Отсутствовало единое хранилище критических ошибок
- **Причина:** Ранее критические ошибки не фиксировались систематически, что приводило к их повторению
- **Решение:** Создан данный реестр `Документация/КРИТИЧЕСКИЕ_ОШИБКИ.md`
- **Правило-предохранитель:** При КАЖДОМ нарушении целостности — ОБЯЗАТЕЛЬНО добавить запись в этот файл
- **Затронутые файлы:** `Документация/КРИТИЧЕСКИЕ_ОШИБКИ.md`

---

## Индекс по категориям

| Категория | Количество | Последняя ошибка |
| ---------- | ---------- | ---------------- |
| XML | 1 | 2026-02-13 |
| BSL | 0 | — |
| Деплой | 0 | — |
| Структура | 0 | — |
| Данные | 0 | — |

---

## Правила-предохранители (сводка)

> Этот раздел содержит ВСЕ правила-предохранители из записей выше в виде быстрого чеклиста.
> Агент ОБЯЗАН проверять этот список ПЕРЕД каждым деплоем.

1. При КАЖДОМ нарушении целостности — ОБЯЗАТЕЛЬНО добавить запись в этот файл
2. При создании Command в Form.xml — ОБЯЗАТЕЛЬНО добавлять `<Action>ИмяПроцедуры</Action>`

<!-- Сюда добавляются правила из каждой новой записи ошибки -->
