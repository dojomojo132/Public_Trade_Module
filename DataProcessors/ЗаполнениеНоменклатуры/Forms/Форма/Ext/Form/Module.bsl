Процедура СоздатьТестовуюНоменклатуру()
	
	// 1. Проверка и создание Налоговых групп (НСИ)
	Группа20 = ПолучитьИлиСоздатьНалоговуюГруппу("Основная (20%)");
	ГруппаБезНДС = ПолучитьИлиСоздатьНалоговуюГруппу("Без НДС");
	
	// 2. Создание папки для товаров
	Родитель = Справочники.Номенклатура.НайтиПоНаименованию("Тестовые товары");
	Если Родитель.Пустая() Тогда
		Гр = Справочники.Номенклатура.СоздатьГруппу();
		Гр.Наименование = "Тестовые товары";
		Гр.Записать();
		Родитель = Гр.Ссылка;
	КонецЕсли;
	
	// 3. Генерация товаров согласно ТЗ
	// А) Обычный товар
	СоздатьТовар(
		"Товар Обычный (Хлеб)", 
		Родитель, 
		Перечисления.ЕдиницыИзмерения.шт, 
		Перечисления.СтавкиНДС.НДС20, 
		Группа20, 
		Ложь, // Акциз
		"",   // Код ВЭД
		30    // Наценка
	);
		
	// Б) Социальный товар
	СоздатьТовар(
		"Товар Социальный (Молоко)", 
		Родитель, 
		Перечисления.ЕдиницыИзмерения.шт, 
		Перечисления.СтавкиНДС.БезНДС, 
		ГруппаБезНДС, 
		Ложь, 
		"", 
		15
	);
	
	// В) Акцизный товар
	СоздатьТовар(
		"Товар Акцизный (Водка)", 
		Родитель, 
		Перечисления.ЕдиницыИзмерения.л, 
		Перечисления.СтавкиНДС.НДС20, 
		Группа20, 
		Истина, 
		"2208601100", 
		50
	);

КонецПроцедуры

Функция ПолучитьИлиСоздатьНалоговуюГруппу(Имя)
	
	Ссылка = Справочники.НалоговыеГруппы.НайтиПоНаименованию(Имя);
	Если Ссылка.Пустая() Тогда
		Эл = Справочники.НалоговыеГруппы.СоздатьЭлемент();
		Эл.Наименование = Имя;
		Эл.Записать();
		Возврат Эл.Ссылка;
	КонецЕсли;
	
	Возврат Ссылка;
	
КонецФункции

Процедура СоздатьТовар(Имя, Родитель, ЕдИзм, Ставка, НалогГруппа, Акциз, КодВЭД, Наценка)
	
	ТоварСсылка = Справочники.Номенклатура.НайтиПоНаименованию(Имя);
	Если Не ТоварСсылка.Пустая() Тогда
		Возврат; // Уже есть
	КонецЕсли;
	
	Товар = Справочники.Номенклатура.СоздатьЭлемент();
	Товар.Наименование = Имя;
	Товар.Родитель = Родитель;
	Товар.Артикул = "TEST-" + Лев(КодВЭД + "001", 5);
	Товар.ЕдиницаИзмерения = ЕдИзм;
	Товар.СтавкаНДС = Ставка;
	Товар.НалоговаяГруппа = НалогГруппа;
	Товар.ТребуетАкцизнуюМарку = Акциз;
	Товар.КодУКТЗЕД = КодВЭД;
	Товар.ПроцентНаценки = Наценка;
	Товар.Записать();
	
КонецПроцедуры

&НаКлиенте
Процедура СоздатьТестовуюНоменклатуру1(Команда)
	СоздатьТестовуюНоменклатуру();
КонецПроцедуры
