# Конфигурация PTM — Public Trade Module

Эта папка содержит все объекты метаданных конфигурации 1С:Предприятие 8.3.27 в формате XML.

---

## 📂 Структура

### Основные подсистемы

```
Конфигурация/
├── Catalogs/                # Справочники
│   ├── Номенклатура/
│   ├── Контрагенты/
│   ├── Склады/
│   ├── Кассы/
│   └── ...
├── Documents/               # Документы
│   ├── ЧекККМ/
│   ├── ПриходТовара/
│   ├── СписаниеТовара/
│   └── ...
├── AccumulationRegisters/   # Регистры накопления
│   ├── ОстаткиТоваров/
│   ├── Продажи/
│   ├── Взаиморасчеты/
│   └── ...
├── InformationRegisters/    # Регистры сведений
│   ├── ЦеныНоменклатуры/
│   ├── ШтрихкодыНоменклатуры/
│   └── ...
├── DataProcessors/          # Обработки
│   ├── РабочееМестоКассира/
│   └── ...
├── Reports/                 # Отчёты
├── CommonModules/           # Общие модули
│   ├── ОбщегоНазначения/
│   ├── МенеджерОборудования/
│   └── ...
├── Enums/                   # Перечисления
├── Constants/               # Константы
├── Roles/                   # Роли
├── Subsystems/              # Подсистемы
└── Ext/                     # Расширения
```

---

## 📖 Документация объектов

Полное описание всех объектов метаданных находится в **[Технической спецификации](../Документация/Спецификации/ТЕХНИЧЕСКАЯ%20СПЕЦИФИКАЦИЯ%20КОНФИГУРАЦИИ%20PTM%20(Public%20Trade%20Module).xml)**.

Для каждого объекта документированы:
- **Purpose** — бизнес-назначение
- **DataModel** — реквизиты, табличные части, измерения, ресурсы
- **Logic** — алгоритмы, движения регистров, проверки
- **Interface** — формы, команды
- **History** — история изменений

---

## 🔍 Работа с метаданными

### Поиск объектов

Используйте MCP-инструменты для работы с метаданными:

```
# Получить список справочников
list_metadata_objects(metaType="Catalogs")

# Получить структуру документа
get_metadata_structure(metaType="Documents", name="ЧекККМ")

# Найти форму
file_search(query="Конфигурация/Documents/ЧекККМ/Forms/**/*.xml")
```

### Проверка имён форм

⚠️ **КРИТИЧНО:** Перед вызовом `ОткрытьФорму()` всегда проверяйте точное имя формы через `file_search`:

```
# Найти точное имя формы
file_search(query="Конфигурация/Documents/ВозвратТовараОтПокупателя/Forms/**/")

# Результат: Forms/ФормаВыбора/
# Вызов: "Документ.ВозвратТовараОтПокупателя.Форма.ФормаВыбора"
```

---

## 🛠️ Стандарты разработки

При изменении объектов конфигурации следуйте:

1. **[Стандартам кодирования 1С 8.3.27](../Документация/Технические_стандарты/1c-standards-8.3.27.md)**
   - Асинхронность (Асинх/Ждать)
   - Именование (русский CamelCase)
   - Структура модулей
   - Запросы и транзакции

2. **[Алгоритму разработки](../Документация/Спецификации/Алгоритм%20разработки.xml)**
   - Анализ → ТЗ → Документирование → Кодирование → Тестирование

3. **[Стандарту XML-структуры](../Документация/Технические_стандарты/xml-structure-8.3.27.md)**
   - Корректные UUID
   - Правильные namespace
   - Валидная вложенность

4. **[Справочнику элементов форм](../Документация/Технические_стандарты/form-elements.md)**
   - Типы элементов
   - Свойства и события

---

## 📋 Основные объекты

### Справочники (11)
- Номенклатура
- Контрагенты
- Склады
- Кассы
- ТипыЦен
- Пользователи
- ДисконтныеКарты
- ВидыДисконтныхКарт
- КассовоеОборудование
- НалоговыеГруппы
- НастройкиПоУмолчанию

### Документы (5)
- ЧекККМ — продажа товаров
- ПриходТовара — поступление от поставщика
- СписаниеТовара — списание со склада
- ВозвратТовараОтПокупателя — возврат от покупателя
- УстановкаЦен — изменение цен номенклатуры

### Регистры накопления (5)
- ОстаткиТоваров — остатки по складам
- Продажи — продажи по номенклатуре
- Взаиморасчеты — расчёты с контрагентами
- ДенежныеСредства — движение денег по кассам
- ПродажиПоДисконтнымКартам — накопление по картам

### Регистры сведений (3)
- ЦеныНоменклатуры — цены по типам цен
- ШтрихкодыНоменклатуры — штрихкоды товаров
- НастройкиОборудования — настройки сканеров, принтеров

### Обработки (7)
- РабочееМестоКассира — POS-терминал
- УправлениеНастройками — настройки системы
- ЗаполниеТестовойНоменклатуры
- ТестовоеЗаполнениеДанных
- ТестовоеЗаполнениеЦен
- ТестовоеЗаполнениеШтрихкодов
- ТестоваяНастройкаКасс

### Отчёты (1)
- ОтчетПоПродажам — анализ продаж

### Общие модули (4)
- ОбщегоНазначения — универсальные функции (сервер)
- ОбщегоНазначенияКлиент — универсальные функции (клиент)
- МенеджерОборудования — работа со сканерами, принтерами
- НастройкиПоУмолчанию — хранение настроек

---

## 📦 Загрузка в 1С

### Через Конфигуратор

1. Запустить Конфигуратор 1С:Предприятие 8.3
2. Создать новую информационную базу
3. **Конфигурация → Загрузить конфигурацию из файлов...**
4. Указать папку: `Конфигурация/`
5. Дождаться завершения загрузки
6. **Конфигурация → Обновить конфигурацию базы данных**
7. Запустить 1С:Предприятие

### Через командную строку

```cmd
"C:\Program Files\1cv8\8.3.27.1719\bin\1cv8.exe" DESIGNER ^
  /S "localhost\ptm" ^
  /N "Администратор" ^
  /LoadConfigFromFiles "D:\Git\Public_Trade_Module\Конфигурация" ^
  /UpdateDBCfg
```

---

## 🧪 Тестирование

После загрузки конфигурации:

1. Заполните тестовые данные через обработки:
   - `ТестовоеЗаполнениеДанных`
   - `ТестовоеЗаполнениеЦен`
   - `ТестовоеЗаполнениеШтрихкодов`

2. Запустите РабочееМестоКассира:
   - `Обработки → РабочееМестоКассира`

3. Проверьте основные сценарии:
   - Продажа товара
   - Применение скидки
   - Возврат товара
   - Отчёт по продажам

---

## 🔗 Полезные ссылки

- [Техническая спецификация](../Документация/Спецификации/ТЕХНИЧЕСКАЯ%20СПЕЦИФИКАЦИЯ%20КОНФИГУРАЦИИ%20PTM%20(Public%20Trade%20Module).xml)
- [Алгоритм разработки](../Документация/Спецификации/Алгоритм%20разработки.xml)
- [Стандарты 1С 8.3.27](../Документация/Технические_стандарты/1c-standards-8.3.27.md)
- [Главный README](../README.md)

---

**Платформа:** 1С:Предприятие 8.3.27.1719+  
**Версия конфигурации:** 1.1.0  
**Дата обновления:** 25 января 2026 г.
